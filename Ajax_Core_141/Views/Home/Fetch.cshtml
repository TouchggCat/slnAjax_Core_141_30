
@{
    ViewData["Title"] = "Fetch";
}

<h1>Fetch</h1>
<img id="img1" />

@section Scripts{ 
    <script>
        // console.log(fetch('@Url.Content("~/api/index")'));  //回傳的是Promise物件
        //fetch('/api/index/').then(response => {
        //    console.log(response.body);

        //    return response.text();
        //}).then(data =>
        //    console.log(data))

         @*fetch('@Url.Content("~/api/GetImageBytes/5")')
            .then(response => response.blob())     //blob()可接收byte陣列
            .then(datas => {
                const myImg = document.querySelector('#img1');
                myImg.src = URL.createObjectURL(datas);
            })*@

         async function LoadMembers() {
            const response = await fetch('@Url.Content("~/api/members")');
            const datas = await response.json();
            datas.forEach(member => {
                console.log(member.name)
            });
        }
        LoadMembers();
    </script>
}